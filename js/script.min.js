function generateUUID(){var a=(new Date).getTime();window.performance&&"function"==typeof window.performance.now&&(a+=performance.now());var b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:3&c|8).toString(16)});return b}function getPlayersFromLocalStorage(){if(localStorage.players_list){for(var a=Array(),b=JSON.parse(localStorage.players_list),c=0;c<b.length;c++){var d=new Player(b[c]);a.push(d)}return a.sort(sortByNames),a}return localStorage.players_list="[]",Array()}function getTournamentsFromLocalStorage(a){if(localStorage.tournaments_list){for(var b=Array(),c=JSON.parse(localStorage.tournaments_list),d=0;d<c.length;d++){var e=new Tournament(c[d]);b.push(e)}return b}return localStorage.tournaments_list="[]",Array()}function savePlayersToLocalStorage(a){a.sort(sortByNames),localStorage.players_list=JSON.stringify(a)}function saveTournamentsToLocalStorage(a,b){console.log(a);for(var c=0;c<a.length;c++)a[c].playerObjs&&delete a[c].playerObjs;localStorage.tournaments_list=JSON.stringify(a);for(var c=0;c<a.length;c++)a[c].createPlayerObjs(b)}function getPlayerByID(a,b){for(var c=0;c<a.length;c++)if(a[c].id==b)return a[c];return null}function getNextPlayerID(a){maxID=0;for(var b=0;b<a.length;b++)a[b].id>maxID&&(maxID=a[b].id);return maxID+1}function sortByNames(a,b){return a.name.last<b.name.last?-1:a.name.last>b.name.last?1:a.name.first<b.name.first?-1:a.name.first>b.name.first?1:a.name.nick<b.name.nick?-1:a.name.nick>b.name.nick?1:0}function Player(a){this.name={first:"",last:"",nick:""},this.email="",this.phone1="",this.created=new Date,this.updated=new Date,this.active=!0,this.id=-1,"undefined"!=typeof a&&("undefined"!=typeof a.email&&(this.name={first:a.name.first,last:a.name.last,nick:a.name.nick}),"undefined"!=typeof a.created&&(this.created=a.created),"undefined"!=typeof a.updated&&(this.updated=a.updated),"undefined"!=typeof a.email&&(this.email=a.email),"undefined"!=typeof a.phone1&&(this.phone1=a.phone1),"undefined"!=typeof a.active&&(this.active=a.active),"undefined"!=typeof a.id&&(this.id=a.id)),this.newFunction=function(){}}function Tournament(a,b){this.players=Array(),this.playerObjs=Array(),this.name="",this.pointsForWin=2,this.pointsForDraw=1,this.pointsForLoss=0,this.pointsForBye=1,this.byeIsAverage=!0,this.scoringPaint=!1,this.scoringComp=!1,this.scoringSportsmanship=!1,this.created=new Date,this.updated=new Date,this.trackPerGameSportsmanship=!0,this.warnSportsmanship=2,this.createPlayerObjs=function(a){this.playerObjs=Array();for(var b=0;b<this.players.length;b++){var c=getPlayerByID(a,this.players[b]);c&&this.playerObjs.push(c)}},"undefined"!=typeof a&&(this.players=a.players,this.name=a.name,"undefined"!=typeof a.created&&(this.created=a.created),"undefined"!=typeof a.updated&&(this.updated=a.updated),"undefined"!=typeof a.pointsForWin&&(this.pointsForWin=a.pointsForWin),"undefined"!=typeof a.pointsForDraw&&(this.pointsForDraw=a.pointsForDraw),"undefined"!=typeof a.pointsForLoss&&(this.pointsForLoss=a.pointsForLoss),"undefined"!=typeof a.pointsForBye&&(this.pointsForBye=a.pointsForBye),"undefined"!=typeof a.byeIsAverage&&(this.byeIsAverage=a.byeIsAverage),"undefined"!=typeof a.scoringPaint&&(this.scoringPaint=a.scoringPaint),"undefined"!=typeof a.scoringComp&&(this.scoringComp=a.scoringComp),"undefined"!=typeof a.scoringSportsmanship&&(this.scoringSportsmanship=a.scoringSportsmanship),"undefined"!=typeof a.trackPerGameSportsmanship&&(this.trackPerGameSportsmanship=a.trackPerGameSportsmanship),"undefined"!=typeof a.warnSportsmanship&&(this.warnSportsmanship=a.warnSportsmanship)),"undefined"!=typeof b&&this.createPlayerObjs(b)}var globalRoutes=["$routeProvider","$translateProvider",function(a,b,c,d){for(lang_count=0;lang_count<available_languages.length;lang_count++)available_languages[lang_count].active&&b.translations(available_languages[lang_count].short_code,available_languages[lang_count].translations);b.useSanitizeValueStrategy("sanitize"),preferred_language="en-US",localStorage&&localStorage["tmp.preferred_language"]?preferred_language=localStorage["tmp.preferred_language"]:localStorage["tmp.preferred_language"]="en-US",b.preferredLanguage(preferred_language),a.when("/",{templateUrl:"pages/welcome.html",controller:"welcomeController"}).when("/credits",{templateUrl:"pages/credits.html",controller:"creditsController"}).when("/settings",{templateUrl:"pages/settings.html",controller:"settingsController"}).when("/players-manage",{templateUrl:"pages/players-manage.html",controller:"controllerPlayersManage"}).when("/tournaments-manage",{templateUrl:"pages/tournaments-manage.html",controller:"controllerTourmamentsManage"})}],available_languages=[],appVersion="0.01Alpha";cordovaApp=angular.module("cordovaApp",["ngRoute","ngResource","ngSanitize","pascalprecht.translate","as.sortable","mm.foundation"],globalRoutes),angular.module("cordovaApp").controller("select_language",["$translate","$scope","$route",function(a,b,c){b.change_language=function(b){a.use(b),localStorage["tmp.preferred_language"]=b,c.reload()}}]),cordovaApp.config(["$compileProvider",function(a){a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|file|blob):/)}]);var available_languages=[],appVersion="0.01Alpha";webApp=angular.module("webApp",["ngRoute","ngResource","ngSanitize","pascalprecht.translate","as.sortable","mm.foundation"],globalRoutes),angular.module("webApp").controller("select_language",["$translate","$scope","$route",function(a,b,c){b.change_language=function(b){a.use(b),localStorage["tmp.preferred_language"]=b,c.reload()}}]),webApp.config(["$compileProvider",function(a){a.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|file|blob):/)}]);var class_dice=function(){};class_dice.prototype={init:function(){this.always_exploding_dice=!1,this.roll_set_count_rolls=[],this.roll_set_count=0,this.label_no_effect="No Effect",this.label_shaken="Shaken",this.label_shaken_and_a_wound="Shaken and a wound",this.label_shaken_and_x_wounds="Shaken and {raises} wounds",this.label_critical_failure="Critical Failure",this.label_failure="Failure",this.label_success="Success",this.label_success_with_a_raise="Success with a raise",this.label_success_with_x_raises="Success with {raises} raises",this.label_die_roll_number="die roll #",this.label_wild_die_roll_number="wild die roll #",this.label_roll_set_number="Roll Set #",this.label_total_roll="Total Roll",this.success_target_number=4,this.success_base_toughness=5,this.success_armor=1,this.success_weapons_ap=0},roll_die:function(a,b,c){for(a||(a=6),total_roll=0,keep_rolling=1,display_roll="";keep_rolling>0;)roll=Math.floor(Math.random()*a)+1,b>0&&roll==a?keep_rolling=1:keep_rolling=0,display_roll+=roll+", ",total_roll+=roll;if(this.roll_set_count_rolls[this.roll_set_count].base_rolls.push(display_roll),this.roll_set_count_rolls[this.roll_set_count].base_roll_sides.push(a),wild_display_roll="",totalwild_dieRoll=0,keep_rolling=1,c>0)for(a=6;keep_rolling>0;)roll=Math.floor(Math.random()*a)+1,b>0&&roll==a?keep_rolling=1:keep_rolling=0,totalwild_dieRoll+=roll,wild_display_roll+=roll+", ";return this.roll_set_count_rolls[this.roll_set_count].wild_die_rolls.push(wild_display_roll),1==totalwild_dieRoll&&1==total_roll?this.roll_set_count_rolls[this.roll_set_count].critical_failure=1:this.roll_set_count_rolls[this.roll_set_count].critical_failure=0,totalwild_dieRoll>total_roll?totalwild_dieRoll:total_roll},roll_dice:function(a,b){var c=0;number_of_sides=6,a.indexOf("*")>0?wild_die=1:wild_die=0,number_of_sides<2&&(number_of_sides=2),a=a.replace("*",""),explodingDice=0,a.indexOf("d")>-1?(rollNumber=a.substring(0,a.indexOf("d"))/1,number_of_sides=a.substring(a.indexOf("d")+1)/1,this.always_exploding_dice&&(explodingDice=1)):a.indexOf("e")>-1?(explodingDice=1,rollNumber=a.substring(0,a.indexOf("e"))/1,number_of_sides=a.substring(a.indexOf("e")+1)/1):rollNumber=a,rollNumber||(rollNumber=1),number_of_sides||(number_of_sides=6);for(var d=rollNumber+"d"+number_of_sides+": ";rollNumber-- >0;)dieRoll=this.roll_die(number_of_sides,explodingDice,wild_die),c+=dieRoll,d+=dieRoll+",",this.roll_set_count_rolls[this.roll_set_count].total_rolled_dice++;return d=d.substring(0,d.length-1),d+="",c},_parse_bit:function(a){return value=0,a.indexOf("d")>-1?value=this.roll_dice(a,0):a.indexOf("e")>-1?value=this.roll_dice(a,0):value=a/1,value},_parse_roll_set:function(a){if(set_total=0,a=a.replace(/ /g,""),a=a.toLowerCase(),a=a.replace(/\+/g," + "),a=a.replace(/x/g," x "),a=a.replace(/\//g," / "),a=a.replace(/\-/g," - "),a=a.replace(/\)/g," ) "),a=a.replace(/\(/g," ( "),a=a.replace(/\,/g," , "),this.roll_set_count_rolls[this.roll_set_count]={},this.roll_set_count_rolls[this.roll_set_count].base_rolls=[],this.roll_set_count_rolls[this.roll_set_count].wild_die_rolls=[],this.roll_set_count_rolls[this.roll_set_count].base_roll_sides=[],this.roll_set_count_rolls[this.roll_set_count].total_rolled_dice=0,this.roll_set_count_rolls[this.roll_set_count].critical_failure=0,a.indexOf(" ")>0)for(items=a.split(" "),current_function="+",count=0;count<items.length;count++)"+"!=items[count]&&"x"!=items[count]&&"-"!=items[count]&&"/"!=items[count]?"+"==current_function?set_total+=this._parse_bit(items[count])/1:"-"==current_function?set_total-=this._parse_bit(items[count])/1:"x"==current_function?0==set_total?set_total=items[count]/1:set_total=set_total*this._parse_bit(items[count])/1:"/"==current_function&&(set_total=set_total/this._parse_bit(items[count])/1):current_function=items[count];else set_total+=this._parse_bit(a);this.roll_set_count_rolls[this.roll_set_count].total_roll=set_total,this.roll_set_count++},parse_roll:function(a){if(total=0,this.roll_set_count=0,this.roll_set_count_rolls=[],a.indexOf(",")>0)for(parse_roll_items=a.split(","),parse_roll_itemcount=0;parse_roll_itemcount<parse_roll_items.length;parse_roll_itemcount++)total=this._parse_roll_set(parse_roll_items[parse_roll_itemcount]);else total+=this._parse_roll_set(a);return total},display_results:function(a,b){for(html="",results_set_count=0;results_set_count<this.roll_set_count;results_set_count++)for(this.roll_set_count>1&&(results_set_count>0&&(html+="<hr />"),html+="<h4>"+this.label_roll_set_number+(results_set_count+1)+"</h4>"),html+="<h5>"+this.label_total_roll+": "+this.roll_set_count_rolls[results_set_count].total_roll+"</h5>",a&&(html+=this.trait_success_margin(this.roll_set_count_rolls[results_set_count].total_roll,null,results_set_count)+"<br />"),b&&(html+=this.damage_success_margin(this.roll_set_count_rolls[results_set_count].total_roll)+"<br />"),current_roll=0;current_roll<this.roll_set_count_rolls[results_set_count].total_rolled_dice;current_roll++)"undefined"!=typeof this.roll_set_count_rolls[results_set_count].base_rolls[current_roll]&&(html+="<br />"+this.label_die_roll_number+(current_roll+1)+" (d"+this.roll_set_count_rolls[results_set_count].base_roll_sides[current_roll]+"): ",this.roll_set_count_rolls[results_set_count].base_rolls[current_roll]&&(this.roll_set_count_rolls[results_set_count].base_rolls[current_roll].length>2?html+=this.roll_set_count_rolls[results_set_count].base_rolls[current_roll].substring(0,this.roll_set_count_rolls[results_set_count].base_rolls[current_roll].length-2):html+=this.roll_set_count_rolls[results_set_count].base_rolls[current_roll])),"undefined"!=typeof this.roll_set_count_rolls[results_set_count].wild_die_rolls[current_roll]&&(this.roll_set_count_rolls[results_set_count].wild_die_rolls[current_roll].length>0&&(html+="<br />"+this.label_wild_die_roll_number+(current_roll+1)+" (d6): "),this.roll_set_count_rolls[results_set_count].wild_die_rolls[current_roll]&&(this.roll_set_count_rolls[results_set_count].wild_die_rolls[current_roll].length>2?html+=this.roll_set_count_rolls[results_set_count].wild_die_rolls[current_roll].substring(0,this.roll_set_count_rolls[results_set_count].wild_die_rolls[current_roll].length-2):html+=this.roll_set_count_rolls[results_set_count].wild_die_rolls[current_roll]));return html},trait_success_margin:function(a,b,c){return b||(b=this.success_target_number),value=a/1-b/1,html="","undefined"!=typeof c&&this.roll_set_count_rolls[c].critical_failure>0?html+='<span  class="color-red bolded uppercase">'+this.label_critical_failure+"</span>":value<0?html+='<span  class="color-red">'+this.label_failure+"</span>":(raises=Math.floor(value/4),0==raises?html+=this.label_success:1==raises?html+='<span  class="color-green bolded">'+this.label_success_with_a_raise+"</span>":html+='<span  class="color-green bolded uppercase">'+this.label_success_with_x_raises.replace("{raises}",raises)+"</span>"),html},set_result_margins:function(a,b,c,d){this.success_target_number=a,this.success_base_toughness=b,this.success_armor=c,this.success_weapons_ap=d},set_label:function(a,b){return"no_effect"==a?(this.label_no_effect=b,b):"total_roll"==a?(this.label_total_roll=b,b):"shaken"==a?(this.label_shaken=b,b):"shaken_and_a_wound"==a?(this.label_shaken_and_a_wound=b,b):"shaken_and_x_wounds"==a?(this.label_shaken_and_x_wounds=b,b):"critical_failure"==a?(this.label_critical_failure=b,b):"roll_set_number"==a?(this.label_roll_set_number=b,b):"failure"==a?(this.label_failure=b,b):"success"==a?(this.label_success=b,b):"success_with_a_raise"==a?(this.label_success_with_a_raise=b,b):"success_with_x_raises"==a?(this.label_success_with_x_raises=b,b):"die_roll_number"==a?(this.label_die_roll_number=b,b):"wild_die_roll_number"==a?(this.label_wild_die_roll_number=b,b):null},set_always_exploding_dice:function(a){return this.always_exploding_dice=a,this.always_exploding_dice},damage_success_margin:function(a,b,c,d){return b||(b=this.success_base_toughness),c||(c=this.success_armor),d||(d=this.success_weapons_ap),c=c/1-d/1,0>c&&(c=0),target_number=b/1+c/1,value=a/1-target_number/1,html="",value<0?html+="<span>"+this.label_no_effect+"</span>":(raises=Math.floor(value/4),0==raises?html+='<span class="color-orange">'+this.label_shaken+"</span>":1==raises?html+='<span class="color-red">'+this.label_shaken_and_a_wound+"</span>":html+='<span class="color-red bolded uppercase">'+this.label_shaken_and_x_wounds.replace("{raises}",raises)+"</span>"),html}};var creditsArray=["$rootScope","$translate","$scope",function(a,b,c){b(["APP_TITLE","INDEX_WELCOME"]).then(function(b){a.title_tag=b.INDEX_WELCOME+" | "+b.APP_TITLE,a.subtitle_tag="&raquo; "+b.INDEX_CREDITS}),c.currentCreditsPage=!0}];angular.module("webApp").controller("creditsController",creditsArray),angular.module("cordovaApp").controller("creditsController",creditsArray);var playersManageArray=["$rootScope","$translate","$scope","$http",function(a,b,c,d){b(["APP_TITLE","WELCOME_BUTTON_MANAGE_PLAYERS"]).then(function(b){a.title_tag=b.WELCOME_BUTTON_MANAGE_PLAYERS+" | "+b.APP_TITLE,a.subtitle_tag="&raquo; "+b.WELCOME_BUTTON_MANAGE_PLAYERS}),c.currentPlayersPage=!0,a.playerList=getPlayersFromLocalStorage(),c.confirmDialogQuestion="",c.showImportExportPlayerDialog=!1,c.confirmDialog=function(a,b){c.confirmDialogQuestion=a,c.showConfirmDialog=!0,c.confirmDialogYes=b},c.closeConfirmDialog=function(){c.showConfirmDialog=!1,c.confirmDialogYes=function(){c.showConfirmDialog=!1}},c.updatePlayerFirstName=function(a){c.tmpPlayer.name.first=a},c.updatePlayerLastName=function(a){c.tmpPlayer.name.last=a},c.updatePlayerNickName=function(a){c.tmpPlayer.name.nick=a},c.updatePlayerActive=function(a){c.tmpPlayer.active=a},c.updatePlayerEmail=function(a){c.tmpPlayer.email=a},c.updatePlayerPhone1=function(a){c.tmpPlayer.phone1=a},c.newPlayerDialog=function(){c.clearTempPlayerData(),c.showEditPlayerDialog=!0},c.deletePlayerDialog=function(d){b(["PLAYERS_DELETE_CONFIRMATION"]).then(function(b){c.confirmDialog(b.PLAYERS_DELETE_CONFIRMATION,function(){c.showConfirmDialog=!1,a.playerList.splice(d,1),savePlayersToLocalStorage(a.playerList)})})},c.editPlayerDialog=function(b){a.playerList[b]&&(c.tmpPlayer=angular.copy(a.playerList[b]),c.tmpPlayerIndex=b,c.showEditPlayerDialog=!0)},c.clearTempPlayerData=function(){c.tmpPlayer=new Player,c.tmpPlayerIndex=-1},c.saveEditPlayerDialog=function(){c.showEditPlayerDialog=!1,c.tmpPlayerIndex>-1?(c.tmpPlayer.updated=new Date,c.tmpPlayer.id<0&&(newID=getNextPlayerID(a.playerList),c.tmpPlayer.id=newID),a.playerList[c.tmpPlayerIndex]=new Player(c.tmpPlayer)):(newID=getNextPlayerID(a.playerList),c.tmpPlayer.created=new Date,c.tmpPlayer.updated=new Date,c.tmpPlayer.id=newID,a.playerList.push(new Player(c.tmpPlayer))),savePlayersToLocalStorage(a.playerList),c.clearTempPlayerData()},c.closeEditPlayerDialog=function(){c.showEditPlayerDialog=!1,c.clearTempPlayerData()},c.importExportPlayersDialog=function(){var a=JSON.stringify(c.playerList),b=new Blob([a],{type:"application/javascript"});c.downloadPlayerData=(window.URL||window.webkitURL).createObjectURL(b),c.showImportExportPlayerDialog=!0},c.closeImportExportPlayerDialog=function(){c.showImportExportPlayerDialog=!1},c.uploadFile=function(b){for(var c=new FileReader,d=0;d<b.length;d++){var e=b[d];c.onload=function(b){if(b.target&&b.target.result){var c=JSON.parse(b.target.result);if(c){objectified=Array();for(var d=0;d<c.length;d++){var e=new Player(c[d]);objectified.push(e)}a.playerList=a.playerList.concat(objectified),savePlayersToLocalStorage(a.playerList)}}},c.readAsText(e)}}}];angular.module("webApp").controller("controllerPlayersManage",playersManageArray),angular.module("cordovaApp").controller("controllerPlayersManage",playersManageArray);var tournamentsManageArray=["$rootScope","$translate","$scope",function(a,b,c){b(["APP_TITLE","WELCOME_BUTTON_MANAGE_TOURNAMENTS"]).then(function(b){a.title_tag=b.WELCOME_BUTTON_MANAGE_TOURNAMENTS+" | "+b.APP_TITLE,a.subtitle_tag="&raquo; "+b.WELCOME_BUTTON_MANAGE_TOURNAMENTS}),c.currentTournamentsPage=!0,a.playerList=getPlayersFromLocalStorage(),a.tournamentList=getTournamentsFromLocalStorage();for(var d=0;d<a.tournamentList.length;d++)a.tournamentList[d].createPlayerObjs(a.playerList);c.confirmDialogQuestion="",c.showImportExportTournamentDialog=!1,c.confirmDialog=function(a,b){c.confirmDialogQuestion=a,c.showConfirmDialog=!0,c.confirmDialogYes=b},c.closeConfirmDialog=function(){c.showConfirmDialog=!1,c.confirmDialogYes=function(){c.showConfirmDialog=!1}},c.updateTournamentName=function(a){c.tmpTournament.name=a},c.updateTournamentPointsForWin=function(a){c.tmpTournament.pointsForWin=a},c.updateTournamentPointsForDraw=function(a){c.tmpTournament.pointsForDraw=a},c.updateTournamentPointsForLoss=function(a){c.tmpTournament.pointsForLoss=a},c.updateByeIsAverage=function(a){c.tmpTournament.byeIsAverage=a},c.updateTournamentPointsForBye=function(a){c.tmpTournament.pointsForBye=a},c.updateTournamentScoringPaint=function(a){c.tmpTournament.scoringPaint=a},c.updateTournamentScoringComp=function(a){c.tmpTournament.scoringComp=a},c.updateTournamentScoringSportsmanship=function(a){c.tmpTournament.scoringSportsmanship=a},c.updateTournamentTrackPerGameSportsmanship=function(a){c.tmpTournament.trackPerGameSportsmanship=a},c.updateTournamentWarnSportsmanship=function(a){c.tmpTournament.warnSportsmanship=a},c.newTournamentDialog=function(){console.log("newTournamentDialog() called"),c.clearTempTournamentData(),c.showEditTournamentDialog=!0},c.deleteTournamentDialog=function(d){b(["TOURNAMENTS_DELETE_CONFIRMATION"]).then(function(b){c.confirmDialog(b.TOURNAMENTS_DELETE_CONFIRMATION,function(){c.showConfirmDialog=!1,a.tournamentList.splice(d,1),saveTournamentsToLocalStorage(a.tournamentList,a.playerList)})})},c.editTournamentDialog=function(b){a.tournamentList[b]&&(c.tmpTournament=angular.copy(a.tournamentList[b]),c.tmpTournamentIndex=b,c.showEditTournamentDialog=!0)},c.clearTempTournamentData=function(){c.tmpTournament=new Tournament,c.tmpTournamentIndex=-1},c.saveEditTournamentDialog=function(){c.showEditTournamentDialog=!1,c.tmpTournamentIndex>-1?(c.tmpTournament.updated=new Date,a.tournamentList[c.tmpTournamentIndex]=c.tmpTournament):(newID=getNextPlayerID(a.playerList),c.tmpTournament.created=new Date,c.tmpTournament.updated=new Date,a.tournamentList.id=newID,a.tournamentList.push(c.tmpTournament)),saveTournamentsToLocalStorage(a.tournamentList,a.playerList),c.clearTempTournamentData()},c.closeEditTournamentDialog=function(){c.showEditTournamentDialog=!1,c.clearTempTournamentData()},c.addPlayerToTournament=function(b){console.log("addPlayerToTournament("+b+") called"),c.tmpTournament.players.push(b),c.tmpTournament.createPlayerObjs(c.playerList),saveTournamentsToLocalStorage(a.tournamentList,a.playerList),c.updateAvailableParticipatingPlayers()},c.removePlayerFromTournament=function(b){console.log("removePlayerFromTournament("+b+") called");for(var d=0;d<c.tmpTournament.players.length;d++)c.tmpTournament.players[d]==b&&(c.tmpTournament.players.splice(d,1),saveTournamentsToLocalStorage(a.tournamentList,a.playerList),c.updateAvailableParticipatingPlayers())},c.updateAvailableParticipatingPlayers=function(){c.availablePlayers=Array(),c.participatingPlayers=angular.copy(c.tmpTournament.playerObjs);for(var a=0;a<c.playerList.length;a++)-1===c.tmpTournament.players.indexOf(c.playerList[a].id)&&c.availablePlayers.push(c.playerList[a]);c.availablePlayers.sort(sortByNames),c.participatingPlayers.sort(sortByNames)},c.showEditTournamentPlayersDialog=!1,c.editTournamentPlayersDialog=function(b){c.tmpTournament=a.tournamentList[b],c.updateAvailableParticipatingPlayers(),c.showEditTournamentPlayersDialog=!0},c.closeTournamentPlayersDialog=function(){c.showEditTournamentPlayersDialog=!1,c.tmpTournament=null},c.importExportTournamentsDialog=function(){for(var a=c.tournamentList,b=0;b<a.length;b++)delete a[b].playerObjs;var d=JSON.stringify(a),e=new Blob([d],{type:"application/javascript"});c.downloadTournamentData=(window.URL||window.webkitURL).createObjectURL(e),c.showImportExportTournamentDialog=!0,console.log("importExportTournamentsDialog - $scope.showImportExportTournamentDialog",c.showImportExportTournamentDialog)},c.closeImportExportTournamentDialog=function(){c.showImportExportTournamentDialog=!1,console.log("closeImportExportTournamentDialog - $scope.showImportExportTournamentDialog",c.showImportExportTournamentDialog)},c.uploadFile=function(b){console.log("files",b);for(var c=new FileReader,d=0;d<b.length;d++){var e=b[d];c.onload=function(b){if(b.target&&b.target.result){var c=JSON.parse(b.target.result);if(c){objectified=Array();for(var d=0;d<c.length;d++){var e=new Tournament(c[d]);objectified.push(e)}a.tournamentList=a.tournamentList.concat(objectified),saveTournamentsToLocalStorage(a.tournamentList,a.playerList)}}},c.readAsText(e)}}}];angular.module("webApp").controller("controllerTourmamentsManage",tournamentsManageArray),angular.module("cordovaApp").controller("controllerTourmamentsManage",tournamentsManageArray);var settingsArray=["$rootScope","$translate","$scope","$route",function(a,b,c,d){for(b(["APP_TITLE","GENERAL_SETTINGS"]).then(function(b){a.title_tag=b.GENERAL_SETTINGS+" | "+b.APP_TITLE,a.subtitle_tag=b.GENERAL_SETTINGS}),c.currentSettingsPage=!0,c.available_languages=Array(),c.users_language={},lang_count=0;lang_count<available_languages.length;lang_count++)available_languages[lang_count].active&&(language_object={id:available_languages[lang_count].short_code,label:available_languages[lang_count].native_name},c.available_languages.push(language_object),localStorage.users_preferred_language==available_languages[lang_count].short_code&&(c.users_language=language_object,c.background_image_url="url(images/flags/64/"+available_languages[lang_count].icon_file+")"));c.chargen_pdf_layout=localStorage.users_chargen_pdf_layout,c.updateLanguage=function(a){for(b.use(c.users_language.id),localStorage.users_preferred_language=c.users_language.id,lang_count=0;lang_count<available_languages.length;lang_count++)available_languages[lang_count].active&&localStorage.users_preferred_language==available_languages[lang_count].short_code&&(c.background_image_url="url(images/flags/64/"+available_languages[lang_count].icon_file+")");d.reload()},c.updateChargenPDF=function(a){localStorage.users_chargen_pdf_layout=a,c.chargen_pdf_layout=a,d.reload()}}];angular.module("webApp").controller("settingsController",settingsArray),angular.module("cordovaApp").controller("settingsController",settingsArray);var welcomeArray=["$rootScope","$translate","$scope",function(a,b,c){b(["APP_TITLE","INDEX_WELCOME"]).then(function(b){a.title_tag=b.INDEX_WELCOME+" | "+b.APP_TITLE,a.subtitle_tag="&raquo; "+b.INDEX_WELCOME}),c.currentWelcomePage=!0}];angular.module("webApp").controller("welcomeController",welcomeArray),angular.module("cordovaApp").controller("welcomeController",welcomeArray),available_languages.push({english_name:"German",native_name:"Deutsch",icon_file:"DE.png",short_code:"de-DE",active:!0,translations:{}}),available_languages.push({english_name:"English",native_name:"English",icon_file:"US.png",short_code:"en-US",active:!0,translations:{APP_TITLE:"@Gauthic's Tournament Tracker",INDEX_WELCOME:"Welcome",INDEX_H3_CORE:"@Gauthic's Tournament Tracker",MENU_TITLE_HOME:"Click here to go home",MENU_TITLE_MANAGE_PLAYERS:"Click here go to player management",MENU_TITLE_MANAGE_TOURNAMENTS:"Click here to go to tournament management",MENU_TITLE_SETTINGS:"Click here to change settings",MENU_TITLE_CREDITS:"Click here to view the credits and help",MENU_TITLE_EXPORT_PLAYERS:"Click here to import and/or export players",MENU_TITLE_ADD_PLAYER:"Click here to add a player",MENU_TITLE_EXPORT_TOURNAMENTS:"Click here to import and/or export tournaments",MENU_TITLE_ADD_TOURNAMENT:"Click here to add a tournament",GENERAL_SELECT_LANGUAGE:"Select Langage",GENERAL_SETTINGS:"Settings",GENERAL_CREDITS:"Credits",GENERAL_COPYRIGHT:"Copyright",GENERAL_WELCOME:"Welcome",GENERAL_POINTS:"Points",GENERAL_POINT:"Point",GENERAL_POINT_VALUE:"Point Value",GENERAL_RULES:"Rules",GENERAL_GROUP:"Group",GENERAL_SKILL:"Skill",GENERAL_NAME:"Name",GENERAL_ALL:"All",GENERAL_SEARCH:"Search",GENERAL_SEARCH_RESULTS:"Search Results",GENERAL_CANCEL:"Cancel",GENERAL_ACTIVE:"Active",GENERAL_DOWNLOAD:"Download",GENERAL_IMPORT:"Import",GENERAL_EXPORT:"Export",GENERAL_SAVE:"Save",GENERAL_ADD:"Add",GENERAL_ITEM_EDIT:"Edit Item",GENERAL_ITEM_REMOVE:"Remove Item",GENERAL_YES:"Yes",GENERAL_NO:"No",GENERAL_SAVE:"Save",GENERAL_CLOSE:"Close",GENERAL_NAME_FIRST:"First Name",GENERAL_NAME_LAST:"Last Name",GENERAL_NAME_NICK:"Nickname",GENERAL_PHONE:"Phone",GENERAL_PHONE_NUMBER:"Phone NUmber",GENERAL_EMAIL:"Email",GENERAL_EMAIL_ADDRESS:"Email Address",GENERAL_INTRODUCTORY:"Introductory",GENERAL_STANDARD:"Standard",GENERAL_ADVANCED:"Advanced",GENERAL_CLOSE:"Close",GENERAL_ROTATE_TO_LANDSCAPE:"Please rotate your device to landscape for optimal viewing",BUTTON_LANG_EN:"English",BUTTON_LANG_DE:"German",BUTTON_LANG_BR:"Brazilian",PLAYERS_DELETE_CONFIRMATION:"Are you sure you want to delete this player?",PLAYERS_IMPORT_INSTRUCTIONS:"To import players into this app, navigate to your Players.json file you have saved.",PLAYERS_DOWNLOAD_INSTRUCTIONS:"Click on the button below to download the current Players data object",TOURNAMENTS_DELETE_CONFIRMATION:"Are you sure you want to delete this tournament?",TOURNAMENTS_IMPORT_INSTRUCTIONS:"To import tournaments into this app, navigate to your Tournaments.json file you have saved. <strong>Be sure that your Players.json and Tournaments.json match, otherwise you may have orphan or wrong players!</strong>",TOURNAMENTS_DOWNLOAD_INSTRUCTIONS:"Click on the button below to download the current Tournaments data object",TOURNAMENTS_NAME:"Tournament Name",TOURNAMENTS_NUM_PLAYERS:"# Players",TOURNAMENTS_EDIT_PLAYERS:"Edit Players",TOURNAMENTS_BASE_SCORING:"Base Scoring",TOURNAMENTS_EXTRA_SCORING:"Extra Scoring",TOURNAMENTS_PLAYERS:"Players",TOURNAMENTS_GENERAL_SETTINGS:"General Settings",TOURNAMENTS_POINTS_FOR_WIN:"Points for Win",TOURNAMENTS_POINTS_FOR_DRAW:"Points for Draw",TOURNAMENTS_POINTS_FOR_LOSS:"Points for Loss",TOURNAMENTS_POINTS_FOR_BYE:"Points for Bye",TOURNAMENTS_BYE_IS_AVERAGE:"Bye is Average",TOURNAMENTS_SCORING_PAINT:"Score Painting",TOURNAMENTS_SCORING_COMP:"Score Army Composition",TOURNAMENTS_SCORING_SPORTSMANSHIP:"Score Sportsmanship",TOURNAMENTS_SPORTSMANSHIP_PER_GAME:"Sportsmanship tracked per game",TOURNAMENTS_SPORTSMANSHIP_WARN:"Warn if Player receives the following number of negative sportsmanship marks",TOURNAMENTS_PLAYERS_PARTCIPATING:"Participating Players",TOURNAMENTS_PLAYERS_AVAILABLE:"Available Players",TOURNAMENTS_GO_TO_PLAYERS:"Go To Players",TOURNAMENTS_NO_AVAILABLE_PLAYERS:"There are no available players to add. Please visit the Player Adminsitration screen to add players.",TOURNAMENTS_NO_PLAYERS:"There are no players in this tournament",WELCOME_BUTTON_MANAGE_PLAYERS:"Manage Players",WELCOME_BUTTON_MANAGE_PLAYERS_DESC:"Before you can actually set up a tournament, you'll probably need to add some players here.",WELCOME_BUTTON_MANAGE_TOURNAMENTS:"Manage Tourmaments",WELCOME_BUTTON_MANAGE_TOURNAMENTS_DESC:"In this area you'll find your past tournaments you've tracked on this device."}});
//# sourceMappingURL=sourcemap.map